# web-oriented-systems-project

## ПРОХАННЯ, щоб назва папки з проектом була  саме web-oriented-systems-project.
У мене не вийшло переланаштувати юрл на сервері нормально, тому якщо назва буде інша, працювати не буде, сорі:(

## Опис
Це проект, в якому сервер на php, а саме на мікро-фреймворку silex.

Взаємодія з віддаленою postgresql базою даних - через csanquer/pdo-service-provider.

В якості шаблонізатора - twig.

На фонтенді - jquery i ajax (ajax -відправка асинхронних запитів на сервер).

Для стилів  у нас less - той самий css, тільки трохи зручніший, дозволяє нам наприклад визначати змінні в файлах стилів.

## Як запустити в себе

1) Склонуйте проект до себе на комп локально.
Один з варіантів як це зробити:
у своій папці відкрийте git bash (вам попередньо треба встановити git).
Введіть:
```sh
git clone https://github.com/IloveCoffeeAndAnime/web-oriented-systems-project.git
```
2) Покладіть проект до себе на локальний сервер (Apache / WAMP і т.д)
3) Відкрийте проект в PHPStorm (або що ви юзаєте для php)
4) Відкрийте вікно Terminal і введіть:
```sh
composer update
```
composer - це як npm для php. Ця команда запустить вам скачування пакетів, необхідних для php, і відразу за ним запустить npm install,
який докачає вам штуки , необхідні для javascript.  І ісля цього вона запустить команду grunt default, яка зкомпілює вам увесь js код в один файл.
Після запуску цієї операції у вас повинні з'явитись папки:
```sh
vendor
node_modules
```
Це папки зі скаченими бібліотеками відповідно для php і javascript. 
Також у вас з'явиться файл ``` web/js/compiled/main.js ```, який містить скомпільований javascript.

5) Тепер запустіть ваш локальний сервер (якщо не запущений) і зайдіть на ньому в папку проекту, далі папку web.
це буде щось типу:
http://localhost/web-oriented-systems-project/web/

Ви побачите синє вікно з переліком назв груп користувачів:)

Якщо перейдете на http://localhost/web-oriented-systems-project/web/db/twigexample
побачите точно те саме)

Це просто два однакові приклади, виконані по-різному.

В першому випадку, html вставляється інформація , яка яку отримали з сервера, використовуючи ajax.

В другому випадку, на фронтенд відразу віправляється шаблон разом з вставленою в нього інформацією.

## Трохи про структуру
В цілому вона виглядає так:
```sh
>node_modules
>vendor
>web
  >assets
    >images
    >stylesheets
      >main.less #основний файл стилів, підключається до всіх сторінок
  >js
    >compiled 
       >main.js #основний js файл, підключається до всіх сторінок, його ви не змінюєте!
    >src #тут пишете свій js код,додаєте файли, які вам треба; щоб код працював, треба викликати його в src/main.js
      > main.js #щоб ваш javascript, треба викликати всі функції тут
      > API.js # тут прописані асинхронні запити GET i POST на сервер, можн використовувати, щоб писати свої запити
  >php #тут серверний код на php
    >db_queries.php #тут запити до бд
    >server_queries.php #тут запити на сервер
    >db_connect.php #параметри підключення до бд
  >views # тут наша розмітка і шаблони
    >commons
      >footer.html #вставляєте в кінці всіх ваших сторінок
      >header.html #вставляєте на початку всіх ваших сторінок
  >index.php #головний файл сервера
  >composer.json #файл за допомогою якого завантажуються залежності для php; якщо треба щось докачати, то composer update
  >package.json #файл за допомогою якого завантажуються залежності для javascript; якщо треба щось докачати, то npm install
  >Gruntfile.js #файл, що компілює код з web/src/compiled/main.js у web/js/compiled/main.js
```

## Важливо!
Після того, як робите якісь зміни на фронтенді в js файлах, треба викликати ``` grunt default ```
Це можна зробити або череp Terminal, або череp phpstorm(якщо через phpstorm -  див. далі наступний заголовок).
Якщо ви це не зробите, то у вас не відбудеться змін на фронтенді, саме ``` grunt default``` компілює javascript

Щоб кожен раз не робити  grunt default, ви можете запустити команду ``` grunt watch```
Ця штука буде чекати ваших оновлень в коді (не забувайте натискати Ctrl+S) і автоматично запускати  ``` grunt default ```
(Як запустити її через phpstorm, див. далі наступний заголовок)

### Як відкрити вікно завдань grunt в phpstorm:
1) Натиснути правою кнопкою миші на Gruntfile.js
2) Вибрати  show grunt tasks
3) У вас буде помилка, натисніть details
4) Задайтe в Package grunt-cli значення з розкривного списку <якись шлях>\grunt-cli
5) Тепер щоб викликати якесь завання grunt, ви можете натиснути на ньому правою кнопкою миші і обрати Run <назва завдання>

